计算机网络原理笔记 04 
概述（四）网络体系结构（一）
作者：赵明心	日期：2019/02/11

	点到点传输选择路径的依据是哪些呢？现实中推荐道路的时候需要知道所有目的节点的位置，也就是在现实中需要有一张地图，这张地图要足够详细以至于所有目的地在地图中都有所反应，也即需要一张路由表。这张路由表要足够详细，以至于所有的目的节点在路由表中都能有所反应。现在的INTERNET中节点数几千万不止，因此存储和查询这张表是非常很困难的。

	其次是如何建表，怎么建立一张路由表以保证所有节点都能在里面，而且网络的规模还在变换当中，曾经是比较好的路径有可能现在会变差，也就是路径的状况还在动态更新。路由表的生成和组织也是一个大问题。

	最后，路由表是否需要直接给出如何从表中给出到目的节点的路径呢？不是，只需要只出数据该走向哪一个下个节点，等走到了下一个节点每个节点都是指出下一个节点，最终到达目的节点。所以路由表中给的目的是一个大范围，而不是具体的节点。采用分层的方式，路由表中目的节点可能是目的的网络或者范围，这样做就可以压缩路由表。

	路由选择的工作就是围绕着路由表展开的，首先需要能根据网络的状况动态更新路由表，再者路由表中的表项需要按照分层的形式压缩组织，减少路由表规模提高转发效率。最后，由于网络节点很多，路由器很多，每个节点无法收集所有其他节点的信息，需要保证所有路由节点都能在网络范围中。

2.4	物理结构和逻辑结构有何关系？
	（1）总线型结构只能使用广播式的方式。星型拓扑结构能不能使用广播式传输方式？
	为了使宿舍中的四台电脑组成一个局域网，可以选择购买集线器或者交换机。点到点和广播式，广播式更加简单，而集线器相对便宜简单，集线器是广播式工作的，交换机是点到点式的。
	A向D发送消息，则集线器会同时向BCD发送，而交换机只向D发送消息。集线器的一个端口接受了数据之后会将其他端口的数据接受关闭并向所有其他端口发送数据。而交换机会根据一张表来选择发送数据，这张表记录了交换机端口和交换机所连接的主机的地址，交换机根据目的地址查表，来选择特定的端口进行转发。这样做说起来简单，但是这张表的生成？
	交换机是即插即用设备，只需要将网线插入端口即可使用不需要做其他设置，因此插拔端口都会影响交换机那张表的维护。所以交换机并不完全是点到点式，还混合了广播式的方式工作。首先，如果交换机查表找到了目的地，那么就按照点到点式转发。如果找不到目的节点，那么交换机就会采用广播的方式工作（有限制的广播）。那么这张表是如何生成的呢？实际上只要主机发送过信息，交换机就可以记录主机的地址。因为在计算机网络数据传输的时候，数据除了包含目的地址还包含源地址，实际上这个类似于寄信。所以A发送过数据，交换机就可以记录A的地址。
	再者，交换机需要确定目的地址才能转发，在这个过程当中还需要对数据进行缓存，之后才能转发，因此交换机需要有足够的缓冲区。
	星型拓扑结构既可以广播式也可以点到点式，具体的传输方式取决于在这之上的传输技术。

	（2）集线器的转发时延是可以忽略不计的，交换机的转发过程需要查表。集线器组网成本低，时延小。但是实际组网的时候，如果不是特别关心价格，首先会选择交换机。原因？集线器的带宽利用率很低，同样100M的集线器和交换机，集线器的平均分配的带宽是低于交换机的。因为广播式需要平摊总带宽。
	对于使用交换机的网络来说，很难监听到信息。集线器则不然，主机只是选择听或者不听，但是数据是都可以接收到的。网卡的工作模式也分为普通模式和混杂模式，普通模式是网卡绝大部分情况的工作模式，普通模式是只上传目的地址等于自己地址的数据，而混杂模式网卡会向用户传递所有接收到的信息。相对于广播式而言，点到点式的安全性提高了。
	还有，对集线器来说，每个接入的设备带宽都必须一致，而交换机因为有缓存，所以允许不同的节点间的链接带宽可以不同。
	交换机另外一个好处是，交换机可以连接的网络规模远大于集线器。因为广播式中存在冲突问题，必须先发现冲突才能解决冲突，如果两个设备距离太远的时候，集线器是检测不到冲突的。广播式网络对于网络跨度是有限制的。交换机的网络跨度大于集线器。
	交换机还支持全双工模式，A向B发送的时候B也可以向A发送，集线器不可以。

	局域网章节中重点介绍广播式，广域网章节中主要介绍点到点传输，主要是路由选择问题。

2.5	网络的标准化组织

2.5.1	国际标准化组织————ISO
	1946年成立，负责制定各种国际标准
	ISO有200多个技术委员会TC，每个技术委员会下设若干个分委员会SC，每个分委员会由若干个工作组WG组成。
	例如：TC97 —— 计算机和信息处理
	ISO是一个义务性的志愿性组织。开放系统互联参考模型也是ISO制定的标准。

2.5.2	国际电信联盟ITU
	1865年成立，1947年ITU成为联合国的一个组织。
	ITU由三部分组成：
	（1）ITU-R：无线通信
	（2）ITU-T：电信标准（早期被称为CCITT）
	（3）ITU-D：开发
	ITU是一个政府性组织，是电信领域最有影响力的组织。

2.5.3	Internet标准组织
	因特网标准化机构是非政府性质的。
	因特网体系结构委员会
	（Internet Architecture Board,IAB）
	（1）因特网工程研究部（IETF）
		处理短期工程问题
	（2）因特网研究任务部（IRTF）
		注重长期的研究
	（3）Internet编号管理局（IANA）
	（4）RFC编辑部
	RFC（Request For Comments）:Internet标准几乎都是以RFC形式提出的（包括TCP/IP协议集）。
	但不是所有协议都会成为标准。

2.5.4	美国国家标准化组织（NIST）
	很多标准最初是美国的国家标准

2.5.5	IEEE

第一章的内容就此结束，第一章主要为概述内容。

第二章	网络体系结构

	（1）网络体系结构（2）接口、服务与协议（3）网络参考模型

	网络体系结构研究方法主要是分层方法，因此本章也主要以分层方式进行研究。描述这些体系结构的术语就是接口、服务、协议。以两个实例来作分册研究：（1）OSI（2）TCP/IP

2.1	分层范例

	在网络中为什么要使用分层的方法？

	两个哲学家在交流哲学问题，两个哲学家来自不同的国家使用不同的语言。那么如何解决交流问题？

	分层结构的优点：
	（1）各层独立：每一层不需要知道下一层是如何实现的，只需要知道层间的接口和所提供的服务
	（2）灵活性好：当任意层发生变化，只要接口不变，上下层均不受影响
	（3）结构上分开：各层可采用最适合的技术，像搭积木一样搭建整个结构
	（4）易于实现和维护：就像编程的时候划分子程序一样，简单的子程序实现的难度低且可靠性高
	（5）促进标准化。由于每一层及其提供的服务都有明确的定义。功能最好不是跨领域的，而是相对单一。

	研究过程：分析问题，抽象成若干个功能独立的块，每块进行独立解决。

2.1.1	分层原则
	（1）根据功能需要分层
	（2）每层的功能明确
	（3）每层的功能的选择有利于制定国际标准
	（4）每层的接口信息量尽可能少
	（5）层数足够多：避免不同的功能混于同一层
	（6）层数不能太多：避免体系结构过于庞大


	示意图：
	
	系统A			系统B
	------			------
	  3			  3
	------			------	
	  |			  |
	  |			  |
	------			------
	  2			  2	
	------			------
	  |			  |
	  |			  |
	------			------
	  1			  1	
	------			------
	  |<-------物理介质------>|
	
	
	为每个哲学家配备翻译、秘书，商定接口，按照什么工作流程来使用服务。哲学家 —— 翻译 —— 秘书层次结构。同一层的两个人之间要进行规则的制定。
	要完成功能，需要完成三个步骤：
	（1）按照功能进行抽象、划分层次
	（2）每一层明确要完成的功能，明确层和层的接口
	（3）制定通信规则（协议）
	
2.2	网络体系结构
	
	研究方法：（1）按功能抽象分层（2）定义层间的接口和提供的服务（3）定义同层间通信的规则——协议。
	网络体系结构的定义：（1）层（2）服务（3）协议
