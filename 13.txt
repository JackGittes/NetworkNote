计算机网络原理笔记 13
数据通信技术（五）
作者：赵明心    日期：2019/02/21

3.11.2  频分多路复用技术FDM
    频分多路复用在现实中最为常见。
    1、当传输介质的带宽大于单个信号的要求时，为有效的利用传输系统将多个信号同时在一条传输线路上传输的技术可以采用频分多路复用。

    2、FDM的实现
    （1）通过调制将不同信号的频率调制到不同的频率范围
    （2）将多路信号合成为一路频率范围更大的信号进行发送
    （3）在接收方再通过解调将信号重新还原成多路信号
    每个设备只接收自己期望的信号。

    广播和有线电视是典型的频分多路复用。语音信号是300~3400Hz，那么如果有三路信号进行传输，每路信号先进行低通滤波，滤出3400Hz以上的高频信号。信号与信号之间存在一个截止频率，防止不同信号之间发生干扰，三路信号合成为一路信号，调制到60~64KHZ范围再发送。

    时分多路复用在宏观并行，在微观是串行的，频分多路复用在宏观和微观都是并行的，这是在模拟信号传输中最为常见的一种。

3.11.3  波分多路复用WDM
    原理：整个波长频带被划分成若干个波长范围，每个用户占用一个波长范围来进行传输。
    这个常见于光传输当中，与频分多路复用有类似之处，一般是通过光的衍射来实现的。

    假设有三路信号发送，将三路信号调制到不同的波长范围，然后把三个信号合成为一个波长范围更宽的信号。这是光传输介质中使用的波分多路复用。

3.11.4  码分多路复用
    这个是在无线传输中常用的技术。
    1、内涵等同于CDMA
    2、允许多个用户在同一时刻使用相同的频带进行通信
    3、各用户使用经过特殊挑选的不同码型
    4、抗干扰能力强
    5、有效增大系统的通信容量
    6、最初是用于军事通信，随着CDMA设备的价格和体积的大幅度下降，现已广泛使用在民用移动通信中，特别是在无线局域网中。
    
    一般在一个信道中，为了防止多路语音之间的干扰，如果频段不够宽，无法进行频分多路，那么就可以使用码分多路。码型的挑选必须按照一定的规则。

    CDMA工作原理：
    （1）比特时间（一位二进制位的传输时长）进一步划分为m（或64或128）个短的时间段，称为码片（chip）
    （2）每个站被指派一个唯一的m位码片序列
        发送比特1，则发送m位码片序列
        发送比特0，则发送码片序列的二进制反码
    （3）任意两个码片序列（S，T）必须满足正交关系：
        S*T=0,S*S=1,S*S'=-1,S*T'=0

    每个二进制位传输的数据要按位累加。以其中一个接受站点的接收为例，在实际位传输时间内传输的码片序列跟自己的码片序列相与。当结果是1表示发送了并且发送的是1，如果是-1表示发送了且发送的是0，如果是0表示没有发送。

    这种方式也就是通过给每个站点分配码片实现来进行多路复用。
    时分多路复用是计算机网络中接触最多的方式，而CDMA方式是相对较难理解的方式。

多路复用是最简单的信道复用技术，广播式传输方式要解决的首要问题是冲突问题，也即信道的访问控制方法问题，在广播式传输中最简单的解决冲突的方式就是多路复用，这个在手机中非常常用。通过将一个信道分配为多个子信道来使多路信号不会发生冲突。但是在计算机网络中一般不会采用很多多路复用技术，主要是因为资源浪费比较大。

3.12    SONET和SDH（自学）
    1、目前的数字传输复用速率存在诸多缺点，其中最主要的是以下两个方面：速率标准不统一和不是同步传输。
    2、为了解决上述问题，美国在1988年首先推出了一个数字传输标准，叫做同步光纤网SONET（Synchronous Optical Network）
    3、ITU-T以美国的SONET标准为基础，制订出了国际标准同步数字系列SDH（Synchronous Digital Hierarchy），即1988年通过的G.707~G.709等三个建议书。

3.13    数据交换技术
    计算机网络的本质就是交换，交换一词最早来自于电话网络，电话网络中的中转结点常称为程控交换机，而计算机网络中常见的是路由器。
    1、交换：在多结点通信网络中，为有效利用通信设备和线路，一般希望动态地设定通信双方间的线路，动态地接通或断开通信线路，称为交换。
    2、交换方式分类：
        （1）电路交换
        （2）存储交换
            报文交换
            分组交换
            信元交换
        （3）混合交换
    简单地说，中间节点需要完成从源节点到目的结点的信息传输，那么需要动态地选择传输路径。电路交换的代表是电话网络，存储交换的网络代表是计算机网络，之所以称为存储交换就是因为存储转发。重点介绍电路交换和存储交换。

3.13.1  电路交换（Circuit Switching）
    直接利用可切换的物理通信线路，连接通信双方。
    1、三个阶段
    （1）建立电路
    （2）传输数据
    （3）拆除电路
    2、主要特点：
    （1）在发送数据前，必须建立起点到点的临时、专用物理通路。
    （2）建立物理通路时间较长，数据传送延迟较短
    例：电话网络 Telephone Networks

    数据的传输依赖于电路的建立，这些电路包含了交换机等中间节点。电路建立之后，即使自己不适用，其他人也无法使用。通路可以是时分多路中的时间片，频分多路复用中的频段等等，这个通路是物理的。

    打电话的时候通过拨号建立通话请求，然后通过交换局建立物理连接，这个物理连接可以是物理介质中的一个子信道，一旦建立了物理连接就像是中间节点被开关接通，而中间节点的转发时延在建立连接后可以忽略不计。在电路交换中，实际的时延只有传输时延和传播时延而没有转发时延。这样的好处是，连接一旦建立，那么时延很小，同时由于通路是专用的，没有其他干扰。

    计算机网络并不使用这种方式，因为信道利用率低，同时网络同时可以服务的用户数量是有限的，当多于上限的用户接入时，必须进行排队等待，有足够资源释放的时候才可以使用。

3.13.2  报文交换（message switching）
    基于之前的两个原因，更多使用的是存储交换。
    1、原理：信息以报文（逻辑上完整的信息段）为单位进行存储转发。
    对于中间节点，采用存储转发方式，一个结点接受数据后先进行存储，然后进行路由选择，再选择能送达目的结点的出口，进入出口链路队列，进行排队。

    2、特点：
    （1）线路利用率高
    （2）要求中间结点（网络通信设备）缓冲大
    （3）延迟时间长
    出错的时候一般要求重发完整报文，其延迟一般比分组交换和信元交换时间长。

3.13.3  分组交换（Packet Switching）
    现在的存储交换一般是以分组为单位的。
    原理：
    （1）信息以分组为单位进行存储转发。源节点把报文分组，在中间结点进行存储转发，目的结点把分组合成报文。
    （2）分组：比报文还小的信息段，通常有最大长度限制。
    （3）信元：大小固定的信息段

    以太网规定的MTU为1500个字节，超过1500个字节要分段。ATM网络是信元交换的典型例子，信元交换时延较低，因为可以直接借助硬件实现，但是缺乏灵活性，增加信元头也会降低信道利用率。目前的TCP/IP协议，IP协议以分组为单位进行转发，不是信元。

    分组交换的特点：
    （1）网络结点设备中不预先分配资源
    （2）线路利用率高
    （3）节点存储器利用率高
    （4）易于重传，可靠性高
    （5）易于开始新的传输，让紧急信息优先通过
    （6）额外信息增加（报文头）
    总体来说，分组交换的性能比报文交换有明显优势。存储交换同样存在很多缺点。
    分组交换分为数据报（datagram）和虚电路（virtual circuit）。
    分组交换的底层本质仍然是存储转发，但是也要像电话网络一样先建立连接。通信子网提供面向连接的情况下是虚电路，无连接情况下是数据报。

    数据报和虚电路
    1、数据报
    （1）每个分组独立路由
    （2）适于传送少量分组，省去呼叫建立过程，速度快
    （3）可以较好处理拥塞
    （4）比较可靠
    2、虚电路
    （1）所有分组只做一次路由
    （2）发送分组前需要先建立虚电路
    （3）相对数据报，网络在处理拥塞时困难，不可靠
    以上独立进行路由选择含义有几点，一个是如果文件分成多个分组，按道理对应同一个目的结点的时候，传输的路径应该是一样的，但是因为每个分组独立，那么每个分组都有独立地址，每个中间节点都独立处理分组，而且中间状态不保留，发送方要包含完整目的地址，中间节点认为分组独立。

    实际上，大量数据传输也经常使用数据报的方式，主要取决于对数据传输的要求。虚电路方式与电路交换很像，最后需要释放虚电路。数据报方式由于路由选择不确定，有可能后发的先到，选择多条路的情况一般是在网络出现拥塞的时候，而不是由于路径选择算法的震荡。

    虚电路建立的时候，需要先发送一个虚呼叫分组VC。VC目的有两个，一是选择从源节点到目的结点的路由，更重要的是第二个目的，虚呼叫将通信的服务质量要求与中间节点进行协商，如果中间节点能满足服务要求，再寻找下一个中间节点，同时被分配的中间节点被要求保留足够的资源（缓冲区等）。一旦虚电路建立，后续发送只需要按照虚电路号进行传输即可，也即虽然中间节点仍然是存储转发，但因为中间节点的资源预分配使得信息的传输顺序性有保证，也因此不会出现中间分组被丢弃的情况。  
    IP网络使用的数据报方式，ATM网络是虚电路方式。数据报方式可靠性高体现在中间节点发生故障的时候，当中间节点出现故障例如结点断开，那么这时候对虚电路的影响很大，因为虚电路断开之后，只能重新再次建立虚电路。而对于数据报方式，链路断开只是网络拓扑发生变化，这时路由表发生更新，若干个结点的路由选择算法会重新规划结点转发。再者是拥塞问题，拥塞产生主要是因为流量产生的不可预测性，虚电路由于资源的预分配，所以遇到的拥塞较少。

3.13.4  交换方式比较
    一张图，此处略去。
