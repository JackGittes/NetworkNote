计算机网络原理笔记 29
局域网技术（九）
作者：赵明心    日期：2019/03/23

5.6 全双工以太网
    1、不再适用CSMA/CD
    2、前提条件
    （1）发送和接收信道必须使用分离的网络介质
    （2）任两个节点间必须配备专门的链路
    （3）网卡和网络交换机必须支持全双工方式
    3、主要应用场合
    （1）交换机到交换机的连接，它们之间通常用较远的距离
    （2）交换机到服务器的连接，以提高通往服务器链路的带宽
    （3）长距离节点间的连接

    全双工通信的无冲突的时候其吞吐量也是半双工的两倍，所以全双工用在需要高速交换的时候。交换机与交换机连接和交换机、服务器连接的目标不同，交换机间连接重视距离，交换机到服务器重视带宽。CSMA/CD由于存在冲突和信道衰减，导致其距离是有限制的，最大传播延迟时间限制了最远两点之间的物理距离。全双工模式下，影响最大传输距离的只有一个因素，那就是信道衰减，随着距离延长信号质量越来越差，长到一定距离之后信号就无法识别。

5.7 高速以太网

    讲完传统以太网之后开始讲解高速以太网，高速以太网是一个普遍化的概念，速率很高。还有一个快速以太网，这个是一个专用名词，快速以太网特指百兆以太网。
    1、速率达到或超过100Mbps的以太网称为高速以太网
    2、在双绞线上传送100Mbps基带信号的星型拓扑以太网，仍使用IEEE 802.3的CSMA/CD协议。100 BASE T以太网又称为快速以太网。

    基本工作原理和传统的10M以太网是类似的，百兆以太网最简单的就是把脉冲带宽压缩到原来的10分之一。在高速以太网中只有星型拓扑而没有总线型拓扑。

5.7.1   100 BASE T特点
    1、MAC帧格式仍然是802.3标准规定的
    2、保持最短帧长不变，但将一个网段的最大电缆长度减小到100m
    3、帧间时间间隔从原来的的9.6us改为现在的0.96us
    4、三种物理层类型
    （1）100 BASE TX
    （2）100 BASE FX
    （3）100 BASE T4

    不同速率级别的MAC层协议是雷同，不完全一样，物理层变化很大。物理层是提升速率的关键因素。物理层不变化的情况下改进传输速率只有改进编码方案。总线型传统以太网的组网范围可以达到500m，主机和集线器连接距离也是100m。

    10M以太网使用了曼彻斯特编码，实际的频率是20M，10M以太网使用的是1236线，两对，一对用于发送，一对用于接收，发送为12，接收为36。这样的设计为全双工提供了支持，但并非一定实现了全双工信道。没有两个独立信道，无法构成全双工信道。

    100M的100 BASE T方案中，使用的编码是4B/5B编码而不是曼彻斯特编码，因为100M如果用曼彻斯特码意味着信号频率为200M，200M信号在双绞线上的有效传输距离小于100m。连续的0或者1过多的话有可能导致接收方接收错误，为了避免这种错误，使用4B/5B编码，4B是用户的原始编码，5B是编码后的编码。例如原始的1111，1111，1111编码后可以是11100，11100，11100。4B编码的状态数有16种，5B的状态数有32个，挑选的5B编码是不会出现连续4个1和连续4个0的编码。经过编码之后至多连续三个1或者连续三个0。

    发送数据100M的情况下，4B/5B的信号频率是125M。光线的距离比双绞线长很多，光信号衰减比电信号要低很多，所以最长网段距离要大很多。100 BASE T4的变化是编码方式，因为100 BASE T4可以使用三类双绞线，三类双绞线不支持125M的信号速率，所以使用了8B/6T编码，这种编码方式把4个数据位映射到三个信号状态，例如1111映射到abc，而abc不是二进制的，是三进制的，01串的4位组合有16种，三进制包含的有27种，大于16种，这时候01串可以唯一的映射到三进制串，还冗余11种。信号电平状态需要三个信号组合起来才有意义，有点像并行通信的概念，4位作为一个原子信号。发送线对是三对，接收线对是几对？接收线对还是三对，收发是同一事物不同角度的看法。虽然T只有四对线，但是因为不具有全双工的作用，所以4对线组成了123正向，234反向发送。1和4是独立的线对，2和3是共享的线对。

    100 BASE T4不具备全双工的通信作用。一对线的频率是25M。可以实现三对线加起来75MHZ，再加上信号状态转换，可以达到100M。

5.8 吉比特以太网(Gigabit Ethernet)
    1、又被称为千兆以太网
    2、支持全双工和半双工两种方式
    3、使用802.3协议规定的帧格式
    4、在半双工方式下使用CSMA/CD协议
    5、与10 BASE T和100 BASE T技术向后兼容
    6、物理层类型：
        （1）1000 BASE X 基于光纤通道的物理层
            1000 BASE SX：SX表示短波长
            1000 BASE LX：LX表示长波长
            1000 BASE CX：CX表示铜线
        （2）1000 BASE T使用4对5类线UTP

    以太网的自适应能力反映了其技术兼容性。千兆以太网中的铜线一般不是用于交换机节点连接，而是用于交换机内部背板之间的连接。网卡自适应的时候，一般是适应低的那个，只要通信双方有一端不是千兆，适应结果就不是千兆，现在的用户端交换机往往达不到千兆，目前的千兆基本都是在服务器端和顶端。

    目前的应用端连接速率超过百兆的应用需求并不多。因此对于末端客户端，百兆基本足够。

    为了保持MAC层的兼容性，中间有没有不适用的地方？有的。
